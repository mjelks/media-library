#!/bin/bash

# Install git hooks for local development
echo "Installing git hooks..."

cat > .git/hooks/pre-push << 'EOF'
#!/bin/bash

echo "ðŸ” Running pre-push checks..."

# Run Rubocop
echo "ðŸ“ Running Rubocop..."
bin/rubocop --fail-level=error
if [ $? -ne 0 ]; then
  echo "âŒ Rubocop failed. Fix issues before pushing."
  exit 1
fi
echo "âœ… Rubocop passed"

# Run tests
echo "ðŸ§ª Running tests..."
bin/rails test
if [ $? -ne 0 ]; then
  echo "âŒ Tests failed. Fix issues before pushing."
  exit 1
fi
echo "âœ… Tests passed"

echo "ðŸš€ All checks passed! Pushing..."
EOF

chmod +x .git/hooks/pre-push
echo "âœ… Git hooks installed!"
